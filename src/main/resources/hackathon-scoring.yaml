# 黑客松评分配置 V2.0 - 支持动态扩展
# Hackathon Scoring Configuration - Dynamic & Extensible

# ==================== 动态评分维度 (支持任意扩展) ====================
# 总和必须为1.0，可以添加任意数量的自定义维度
dimensions:
  # 核心维度
  code_quality:
    weight: 0.40
    display_name: "代码质量"
    description: "代码规范、复杂度、坏味道、架构设计"

  innovation:
    weight: 0.30
    display_name: "创新性"
    description: "技术栈创新、设计模式、AI评价、独特性"

  completeness:
    weight: 0.20
    display_name: "完成度"
    description: "代码结构、功能实现、测试覆盖"

  documentation:
    weight: 0.10
    display_name: "文档质量"
    description: "README、代码注释、API文档"

  # ========== 可扩展的自定义维度示例 ==========
  # 取消注释以启用自定义维度

  # user_experience:
  #   weight: 0.15
  #   display_name: "用户体验"
  #   description: "界面设计、交互流畅度、易用性"

  # performance:
  #   weight: 0.10
  #   display_name: "性能表现"
  #   description: "响应时间、资源占用、并发能力"

  # security:
  #   weight: 0.10
  #   display_name: "安全性"
  #   description: "输入验证、数据加密、权限控制"

  # scalability:
  #   weight: 0.05
  #   display_name: "可扩展性"
  #   description: "模块化设计、插件机制、配置灵活性"

# ==================== 代码质量子维度权重 (总和必须为1.0) ====================
code_quality:
  base_quality_weight: 0.40      # 基础质量 40%
  complexity_weight: 0.30        # 复杂度控制 30%
  code_smell_weight: 0.20        # 代码坏味道 20%
  architecture_weight: 0.10      # 架构设计 10%

# ==================== 创新性子维度权重 (总和必须为1.0) ====================
innovation:
  tech_stack_weight: 0.30        # 技术栈创新 30%
  design_pattern_weight: 0.30    # 设计模式 30%
  ai_evaluation_weight: 0.25     # AI评价 25%
  uniqueness_weight: 0.15        # 独特性 15%

# ==================== 完成度子维度权重 (总和必须为1.0) ====================
completeness:
  structure_weight: 0.40         # 代码结构 40%
  functionality_weight: 0.30     # 功能实现 30%
  test_coverage_weight: 0.20     # 测试覆盖 20%
  code_standard_weight: 0.10     # 代码规范 10%

# ==================== 复杂度评分阈值 ====================
complexity:
  excellent: 5.0                 # < 5.0 优秀 (满分)
  good: 7.0                      # 5.0-7.0 良好 (扣2分)
  medium: 10.0                   # 7.0-10.0 中等 (扣5分)
  poor: 15.0                     # 10.0-15.0 较差 (扣10分)
  # > 15.0 很差 (扣15分)

  high_complexity_ratio_warning: 0.15   # 高复杂度方法占比警戒线 15%
  high_complexity_ratio_critical: 0.30  # 高复杂度方法占比危险线 30%

# ==================== 代码坏味道扣分 ====================
code_smell_penalties:
  CRITICAL: 3                    # 严重问题 -3分
  HIGH: 2                        # 高优先级 -2分
  MEDIUM: 1                      # 中等优先级 -1分
  LOW: 0                         # 低优先级 -0分

# ==================== 设计模式加分 ====================
design_pattern_bonus:
  CREATIONAL: 2
  STRUCTURAL: 3
  BEHAVIORAL: 3
  ARCHITECTURAL: 4
  COMBINATION: 5

# ==================== 动态评分规则 (支持任意扩展) ====================
# 规则会自动应用到对应的维度
scoring_rules:

  # ---------- 代码质量规则 ----------
  - name: "code-quality-basic"
    description: "基础代码质量规则"
    dimension: "code_quality"
    weight: 0.5
    enabled: true
    strategy: "keyword_matching"
    positive_keywords:
      "单元测试": 20
      "集成测试": 15
      "代码注释": 10
      "异常处理": 15
      "日志记录": 10
      "输入验证": 10
    negative_keywords:
      "代码重复": -15
      "长方法": -10
      "硬编码": -10
      "全局变量": -8

  - name: "code-quality-advanced"
    description: "高级代码质量规则"
    dimension: "code_quality"
    weight: 0.5
    enabled: true
    strategy: "keyword_matching"
    positive_keywords:
      "设计模式": 15
      "依赖注入": 12
      "接口抽象": 10
      "错误处理": 10
    negative_keywords:
      "循环依赖": -15
      "上帝类": -12

  # ---------- 创新性规则 ----------
  - name: "innovation-technology"
    description: "技术创新规则"
    dimension: "innovation"
    weight: 0.6
    enabled: true
    strategy: "keyword_matching"
    positive_keywords:
      "AI": 20
      "机器学习": 20
      "深度学习": 18
      "大模型": 18
      "区块链": 15
      "微服务": 12
      "GraphQL": 12
      "WebAssembly": 15
      "Rust": 10
      "Kubernetes": 10

  - name: "innovation-design"
    description: "设计创新规则"
    dimension: "innovation"
    weight: 0.4
    enabled: true
    strategy: "keyword_matching"
    positive_keywords:
      "创新架构": 15
      "独特算法": 18
      "原创方案": 20
      "跨领域": 12

  # ---------- 完成度规则 ----------
  - name: "completeness-features"
    description: "功能完整性规则"
    dimension: "completeness"
    weight: 0.7
    enabled: true
    strategy: "keyword_matching"
    positive_keywords:
      "完整功能": 20
      "用户界面": 15
      "数据处理": 12
      "错误提示": 10
      "配置管理": 8
    negative_keywords:
      "功能缺失": -20
      "未实现": -15

  - name: "completeness-testing"
    description: "测试完整性规则"
    dimension: "completeness"
    weight: 0.3
    enabled: true
    strategy: "keyword_matching"
    positive_keywords:
      "测试用例": 18
      "测试覆盖": 15
      "自动化测试": 12
    negative_keywords:
      "无测试": -25

  # ---------- 文档质量规则 ----------
  - name: "documentation-readme"
    description: "README文档规则"
    dimension: "documentation"
    weight: 0.6
    enabled: true
    strategy: "keyword_matching"
    positive_keywords:
      "安装说明": 15
      "使用教程": 15
      "API文档": 12
      "示例代码": 10
      "贡献指南": 8

  - name: "documentation-code-comments"
    description: "代码注释规则"
    dimension: "documentation"
    weight: 0.4
    enabled: true
    strategy: "keyword_matching"
    positive_keywords:
      "详细注释": 12
      "JavaDoc": 10
      "TODO注释": 5

  # ========== 自定义规则示例 ==========
  # 可以添加任意数量的自定义规则

  # 用户体验规则（如果启用了user_experience维度）
  # - name: "ux-interface"
  #   description: "用户界面体验规则"
  #   dimension: "user_experience"
  #   weight: 1.0
  #   enabled: false
  #   strategy: "keyword_matching"
  #   positive_keywords:
  #     "响应式设计": 15
  #     "友好界面": 12
  #     "流畅交互": 10
  #     "无障碍": 8

  # 性能规则（如果启用了performance维度）
  # - name: "performance-optimization"
  #   description: "性能优化规则"
  #   dimension: "performance"
  #   weight: 1.0
  #   enabled: false
  #   strategy: "keyword_matching"
  #   positive_keywords:
  #     "缓存策略": 15
  #     "异步处理": 12
  #     "性能优化": 10
  #     "数据库索引": 8
  #   negative_keywords:
  #     "性能问题": -15
  #     "内存泄漏": -20

  # 安全性规则（如果启用了security维度）
  # - name: "security-basic"
  #   description: "基础安全规则"
  #   dimension: "security"
  #   weight: 1.0
  #   enabled: false
  #   strategy: "keyword_matching"
  #   positive_keywords:
  #     "输入验证": 15
  #     "数据加密": 15
  #     "SQL注入防护": 12
  #     "XSS防护": 12
  #     "认证授权": 10
  #   negative_keywords:
  #     "安全漏洞": -20
  #     "明文密码": -18

# ==================== AST分析配置 ====================
ast_analysis:
  enabled: true                  # 启用AST深度分析

  # 代码度量阈值
  thresholds:
    long_method: 50              # 长方法阈值 (行数)
    high_complexity: 10          # 高复杂度阈值 (圈复杂度)
    god_class_methods: 20        # 上帝类-方法数阈值
    god_class_fields: 15         # 上帝类-字段数阈值
    too_many_parameters: 5       # 参数过多阈值
    max_nesting_depth: 4         # 最大嵌套深度

  # 类规模评分标准
  class_count:
    excellent: 20                # >= 20个类
    good: 10                     # >= 10个类
    medium: 5                    # >= 5个类
    basic: 3                     # >= 3个类

  # 方法数量评分标准
  method_count:
    excellent: 50                # >= 50个方法
    good: 30                     # >= 30个方法
    medium: 15                   # >= 15个方法
    basic: 5                     # >= 5个方法

# ==================== 架构风格评分 ====================
architecture_styles:
  hexagonal: 10                  # 六边形架构
  microservices: 9               # 微服务架构
  layered: 8                     # 分层架构
  has_patterns: 7                # 使用设计模式
  simple: 5                      # 简单架构

# ==================== 技术栈创新关键词 ====================
innovation_keywords:
  - "AI"
  - "机器学习"
  - "深度学习"
  - "大模型"
  - "区块链"
  - "云原生"
  - "微服务"
  - "serverless"
  - "GraphQL"
  - "WebAssembly"
  - "Rust"
  - "Kubernetes"
  - "Docker"
  - "React"
  - "Vue3"
  - "Next.js"
  - "Spring Boot"
  - "Redis"
  - "MongoDB"
  - "Elasticsearch"

# ==================== 测试覆盖率评分 ====================
test_coverage:
  excellent: 0.20                # >= 20% 测试文件占比
  good: 0.10                     # >= 10% 测试文件占比
  basic: 0.05                    # >= 5% 测试文件占比

# ==================== 文档质量评分 ====================
documentation:
  readme_weight: 0.60            # README质量权重 60%
  code_comment_weight: 0.30      # 代码注释权重 30%
  api_doc_weight: 0.10           # API文档权重 10%

  # 注释率评分标准
  comment_ratio:
    optimal_min: 0.15            # 最佳注释率下限 15%
    optimal_max: 0.30            # 最佳注释率上限 30%
    good: 0.10                   # 良好注释率 >= 10%
    basic: 0.05                  # 基本注释率 >= 5%

# ==================== 代码行数评分标准 ====================
code_lines:
  excellent: 2000                # >= 2000行
  good: 1000                     # >= 1000行
  medium: 500                    # >= 500行
  basic: 200                     # >= 200行

# ==================== 文件数量评分标准 ====================
file_count:
  excellent: 20                  # >= 20个文件
  good: 10                       # >= 10个文件
  medium: 5                      # >= 5个文件
  basic: 3                       # >= 3个文件

# ==================== 日志配置 ====================
logging:
  detail_level: INFO             # 详细程度: DEBUG, INFO, WARN, ERROR
  log_ast_metrics: true          # 记录AST度量详情
  log_score_breakdown: true      # 记录评分明细

