# ğŸ“¥ å‘é‡æ£€ç´¢æ¨¡å‹ä¸‹è½½æŒ‡å—

## ğŸ¯ æ¦‚è¿°

çŸ¥è¯†åº“é—®ç­”ç³»ç»Ÿæ”¯æŒä¸¤ç§æ£€ç´¢æ¨¡å¼ï¼š

1. **å…³é”®è¯æ£€ç´¢**ï¼ˆé»˜è®¤ï¼Œå·²å¯ç”¨ï¼‰
   - âœ… æ— éœ€ä¸‹è½½æ¨¡å‹
   - âœ… å¼€ç®±å³ç”¨
   - âœ… å¿«é€Ÿå“åº”
   - âš ï¸ ä»…æ”¯æŒç²¾ç¡®åŒ¹é…

2. **å‘é‡æ£€ç´¢**ï¼ˆå¯é€‰ï¼Œéœ€è¦æ¨¡å‹ï¼‰
   - âœ… è¯­ä¹‰ç†è§£
   - âœ… æ¨¡ç³ŠåŒ¹é…
   - âœ… æ›´é«˜å‡†ç¡®åº¦
   - âš ï¸ éœ€è¦ä¸‹è½½æ¨¡å‹æ–‡ä»¶

---

## ğŸš€ å¿«é€Ÿå¼€å§‹ï¼ˆä½¿ç”¨å…³é”®è¯æ£€ç´¢ï¼‰

**é»˜è®¤é…ç½®å·²ç»å¯ä»¥ä½¿ç”¨ï¼Œæ— éœ€ä»»ä½•é¢å¤–æ“ä½œï¼**

å½“å‰é…ç½®ï¼š
```yaml
vector-search:
  enabled: false  # ä½¿ç”¨å…³é”®è¯æ£€ç´¢
```

å¯åŠ¨åº”ç”¨å³å¯ï¼š
```batch
start.bat
```

---

## ğŸ“¦ å¯ç”¨å‘é‡æ£€ç´¢ï¼ˆå¯é€‰ï¼‰

### æ­¥éª¤1: ä¸‹è½½æ¨¡å‹æ–‡ä»¶

#### æ¨èæ¨¡å‹ A: Paraphrase Multilingualï¼ˆå¤šè¯­è¨€ï¼Œæ¨èï¼‰

**æ¨¡å‹ä¿¡æ¯**:
- **åç§°**: paraphrase-multilingual-MiniLM-L12-v2
- **å¤§å°**: ~420 MB
- **è¯­è¨€**: æ”¯æŒ50+ç§è¯­è¨€ï¼ˆåŒ…æ‹¬ä¸­è‹±æ–‡ï¼‰
- **é€‚ç”¨**: é€šç”¨åœºæ™¯

**ä¸‹è½½åœ°å€**:
- HuggingFace: https://huggingface.co/sentence-transformers/paraphrase-multilingual-MiniLM-L12-v2
- ç›´æ¥ä¸‹è½½: https://huggingface.co/sentence-transformers/paraphrase-multilingual-MiniLM-L12-v2/resolve/main/model.onnx

**ä¸‹è½½æ–‡ä»¶**:
1. è®¿é—®ä¸Šè¿°é“¾æ¥
2. ç‚¹å‡» "Files and versions"
3. ä¸‹è½½ `model.onnx` æ–‡ä»¶ï¼ˆ~420 MBï¼‰

---

#### æ¨èæ¨¡å‹ B: Text2Vec Base Chineseï¼ˆä¸­æ–‡ä¼˜åŒ–ï¼‰

**æ¨¡å‹ä¿¡æ¯**:
- **åç§°**: text2vec-base-chinese
- **å¤§å°**: ~400 MB
- **è¯­è¨€**: ä¸­æ–‡ä¼˜åŒ–
- **é€‚ç”¨**: ä¸­æ–‡æ–‡æ¡£åœºæ™¯

**ä¸‹è½½åœ°å€**:
- HuggingFace: https://huggingface.co/shibing624/text2vec-base-chinese
- ç›´æ¥ä¸‹è½½: https://huggingface.co/shibing624/text2vec-base-chinese/resolve/main/model.onnx

---

#### æ¨èæ¨¡å‹ C: All-MiniLM-L6-v2ï¼ˆè‹±æ–‡ï¼Œå°å·§ï¼‰

**æ¨¡å‹ä¿¡æ¯**:
- **åç§°**: all-MiniLM-L6-v2
- **å¤§å°**: ~80 MB
- **è¯­è¨€**: è‹±æ–‡
- **é€‚ç”¨**: è‹±æ–‡æ–‡æ¡£ï¼Œå†…å­˜å—é™åœºæ™¯

**ä¸‹è½½åœ°å€**:
- HuggingFace: https://huggingface.co/sentence-transformers/all-MiniLM-L6-v2
- ç›´æ¥ä¸‹è½½: https://huggingface.co/sentence-transformers/all-MiniLM-L6-v2/resolve/main/model.onnx

---

### æ­¥éª¤2: æ”¾ç½®æ¨¡å‹æ–‡ä»¶

âš ï¸ **é‡è¦**: æ¨¡å‹æ–‡ä»¶éœ€è¦æ”¾åœ¨ JAR åŒ…å†…ï¼Œè€Œä¸æ˜¯å¤–éƒ¨ç›®å½•ã€‚

#### æ–¹å¼ A: ä¿®æ”¹æºç åé‡æ–°æ‰“åŒ…ï¼ˆæ¨èï¼‰

1. **å°†æ¨¡å‹æ–‡ä»¶æ”¾åˆ°æºç ç›®å½•**:
   ```
   src/main/resources/models/paraphrase-multilingual/
   â””â”€â”€ model.onnx
   ```

2. **ä¿®æ”¹ pom.xmlï¼Œç¡®ä¿åŒ…å«æ¨¡å‹æ–‡ä»¶**:
   ```xml
   <plugin>
       <groupId>org.apache.maven.plugins</groupId>
       <artifactId>maven-resources-plugin</artifactId>
       <configuration>
           <resources>
               <resource>
                   <directory>src/main/resources</directory>
                   <excludes>
                       <!-- æ’é™¤æµ‹è¯•æ–‡æ¡£ï¼Œä½†ä¿ç•™æ¨¡å‹æ–‡ä»¶ -->
                       <exclude>simpleExcel/**</exclude>
                   </excludes>
               </resource>
           </resources>
       </configuration>
   </plugin>
   ```

3. **é‡æ–°æ‰“åŒ…**:
   ```batch
   cd D:\Jetbrains\hackathon\AI-Reviewer\ai-reviewer-base-file-rag
   build-and-deploy.bat
   ```

4. **æ–°çš„ JAR åŒ…å°†åŒ…å«æ¨¡å‹æ–‡ä»¶**ï¼ˆä½“ç§¯ä¼šå¢åŠ ~400-500 MBï¼‰

---

#### æ–¹å¼ B: æ‰‹åŠ¨æ·»åŠ åˆ°ç°æœ‰ JARï¼ˆä¸æ¨èï¼‰

å¦‚æœä¸æƒ³é‡æ–°æ‰“åŒ…ï¼Œå¯ä»¥æ‰‹åŠ¨æ·»åŠ ï¼š

```batch
# åˆ›å»ºä¸´æ—¶ç›®å½•
mkdir temp
cd temp

# è§£å‹ JAR
jar xf ..\ai-reviewer-base-file-rag-1.0.jar

# åˆ›å»ºæ¨¡å‹ç›®å½•
mkdir BOOT-INF\classes\models\paraphrase-multilingual

# å¤åˆ¶æ¨¡å‹æ–‡ä»¶
copy E:\Downloads\model.onnx BOOT-INF\classes\models\paraphrase-multilingual\

# é‡æ–°æ‰“åŒ…
jar cfm ..\ai-reviewer-base-file-rag-1.0-with-model.jar META-INF\MANIFEST.MF .

cd ..
```

âš ï¸ æ³¨æ„ï¼šè¿™ç§æ–¹å¼å®¹æ˜“å‡ºé”™ï¼Œä¸æ¨èä½¿ç”¨ã€‚

---

### æ­¥éª¤3: ä¿®æ”¹é…ç½®å¯ç”¨å‘é‡æ£€ç´¢

ç¼–è¾‘ `config/application.yml`:

```yaml
knowledge:
  qa:
    vector-search:
      # å¯ç”¨å‘é‡æ£€ç´¢
      enabled: true
      
      model:
        # ç¡®ä¿æ¨¡å‹åç§°ä¸ç›®å½•åŒ¹é…
        name: paraphrase-multilingual
        path: /models/paraphrase-multilingual/model.onnx
```

---

### æ­¥éª¤4: é‡å¯åº”ç”¨

```batch
# åœæ­¢åº”ç”¨
stop.bat

# å¯åŠ¨åº”ç”¨
start.bat
```

---

## ğŸ§ª éªŒè¯å‘é‡æ£€ç´¢

### æ£€æŸ¥å¯åŠ¨æ—¥å¿—

åº”è¯¥çœ‹åˆ°ï¼š

```
ğŸš€ æ­¥éª¤2: åˆå§‹åŒ–å‘é‡æ£€ç´¢å¼•æ“
   - æ¨¡å‹: paraphrase-multilingual
   - ç»´åº¦: 384
   - è·¯å¾„: /models/paraphrase-multilingual/model.onnx
   âœ… å‘é‡æ£€ç´¢å¼•æ“å·²å°±ç»ª
```

**å¦‚æœçœ‹åˆ°é”™è¯¯**:
```
âŒ å‘é‡æ£€ç´¢å¼•æ“åˆå§‹åŒ–å¤±è´¥
java.io.IOException: æ¨¡å‹æ–‡ä»¶ä¸å­˜åœ¨
```

è¯´æ˜æ¨¡å‹æ–‡ä»¶æœªæ­£ç¡®æ”¾ç½®ï¼Œè¯·æ£€æŸ¥ï¼š
1. æ¨¡å‹æ–‡ä»¶æ˜¯å¦åœ¨ JAR åŒ…å†…
2. è·¯å¾„æ˜¯å¦æ­£ç¡®
3. JAR åŒ…æ˜¯å¦é‡æ–°æ‰“åŒ…

---

## ğŸ“Š æ€§èƒ½å¯¹æ¯”

| æ£€ç´¢æ¨¡å¼ | å“åº”é€Ÿåº¦ | å‡†ç¡®åº¦ | å†…å­˜å ç”¨ | é€‚ç”¨åœºæ™¯ |
|---------|---------|--------|---------|---------|
| **å…³é”®è¯æ£€ç´¢** | âš¡ å¿«é€Ÿ<br>50-100ms | â­â­â­<br>ç²¾ç¡®åŒ¹é… | ğŸ’¾ ä½<br>~500MB | ç²¾ç¡®æŸ¥è¯¢<br>å…³é”®è¯æœç´¢ |
| **å‘é‡æ£€ç´¢** | ğŸš€ ä¸­ç­‰<br>100-300ms | â­â­â­â­â­<br>è¯­ä¹‰ç†è§£ | ğŸ’¾ é«˜<br>~1.5GB | æ¨¡ç³ŠæŸ¥è¯¢<br>è¯­ä¹‰æœç´¢ |

---

## ğŸ¯ æ¨èé…ç½®

### å°å‹é¡¹ç›®ï¼ˆæ–‡æ¡£ < 1000ï¼‰

```yaml
vector-search:
  enabled: false  # ä½¿ç”¨å…³é”®è¯æ£€ç´¢å³å¯
```

### ä¸­å‹é¡¹ç›®ï¼ˆæ–‡æ¡£ 1000-10000ï¼‰

```yaml
vector-search:
  enabled: true
  model:
    name: all-MiniLM-L6-v2  # ä½¿ç”¨è¾ƒå°çš„è‹±æ–‡æ¨¡å‹
```

### å¤§å‹é¡¹ç›®ï¼ˆæ–‡æ¡£ > 10000ï¼‰

```yaml
vector-search:
  enabled: true
  model:
    name: paraphrase-multilingual  # å¤šè¯­è¨€æ”¯æŒ
  top-k: 50  # å¢åŠ æ£€ç´¢æ•°é‡
```

---

## â“ å¸¸è§é—®é¢˜

### Q1: ä¸ºä»€ä¹ˆé»˜è®¤ä¸å¯ç”¨å‘é‡æ£€ç´¢ï¼Ÿ

**A**: 
1. éœ€è¦ä¸‹è½½å¤§å‹æ¨¡å‹æ–‡ä»¶ï¼ˆ400-500 MBï¼‰
2. å ç”¨æ›´å¤šå†…å­˜ï¼ˆ~1GBï¼‰
3. å…³é”®è¯æ£€ç´¢åœ¨å¾ˆå¤šåœºæ™¯ä¸‹å·²ç»è¶³å¤Ÿ

### Q2: å¯ä»¥åŒæ—¶ä½¿ç”¨ä¸¤ç§æ£€ç´¢å—ï¼Ÿ

**A**: å¯ä»¥ï¼ç³»ç»Ÿæ”¯æŒæ··åˆæ£€ç´¢ï¼š

```yaml
vector-search:
  enabled: true  # å¯ç”¨å‘é‡æ£€ç´¢åï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨èåˆä¸¤ç§ç»“æœ
```

### Q3: æ¨¡å‹æ–‡ä»¶å¯ä»¥æ”¾åœ¨å¤–éƒ¨å—ï¼Ÿ

**A**: ç›®å‰ä¸æ”¯æŒã€‚æ¨¡å‹æ–‡ä»¶å¿…é¡»æ‰“åŒ…åœ¨ JAR å†…ã€‚åŸå› ï¼š
1. ç¡®ä¿éƒ¨ç½²ä¸€è‡´æ€§
2. ç®€åŒ–é…ç½®
3. é¿å…è·¯å¾„é—®é¢˜

### Q4: å¯ä»¥ä½¿ç”¨å…¶ä»–æ¨¡å‹å—ï¼Ÿ

**A**: å¯ä»¥ï¼åªéœ€ï¼š
1. ä¸‹è½½ ONNX æ ¼å¼çš„æ¨¡å‹
2. æ”¾åˆ° `resources/models/<æ¨¡å‹å>/model.onnx`
3. ä¿®æ”¹é…ç½®ä¸­çš„ `model.name` å’Œ `model.path`

### Q5: å¦‚ä½•é€‰æ‹©æ¨¡å‹ï¼Ÿ

**å»ºè®®**:
- **å¤šè¯­è¨€åœºæ™¯**: paraphrase-multilingual
- **çº¯ä¸­æ–‡åœºæ™¯**: text2vec-base-chinese
- **çº¯è‹±æ–‡åœºæ™¯**: all-MiniLM-L6-v2
- **å†…å­˜å—é™**: all-MiniLM-L6-v2ï¼ˆæœ€å°ï¼‰

---

## ğŸ”§ æ•…éšœæ’æŸ¥

### é—®é¢˜1: æ¨¡å‹åŠ è½½å¤±è´¥

**é”™è¯¯**:
```
æ¨¡å‹æ–‡ä»¶ä¸å­˜åœ¨: models/xxx/model.onnx
```

**è§£å†³**:
1. ç¡®è®¤æ¨¡å‹æ–‡ä»¶åœ¨ `src/main/resources/models/` ç›®å½•
2. é‡æ–°æ‰“åŒ…: `build-and-deploy.bat`
3. æ£€æŸ¥ JAR åŒ…å†…å®¹: `jar tf ai-reviewer-base-file-rag-1.0.jar | findstr model.onnx`

---

### é—®é¢˜2: å†…å­˜ä¸è¶³

**é”™è¯¯**:
```
java.lang.OutOfMemoryError: Java heap space
```

**è§£å†³**:

ç¼–è¾‘ `start.bat`ï¼Œå¢åŠ å†…å­˜ï¼š
```batch
set JAVA_OPTS=%JAVA_OPTS% -Xms1g -Xmx4g
```

---

### é—®é¢˜3: å“åº”ç¼“æ…¢

**ä¼˜åŒ–å»ºè®®**:
1. å‡å°‘ `top-k` å€¼
2. æé«˜ç›¸ä¼¼åº¦é˜ˆå€¼
3. ä½¿ç”¨æ›´å°çš„æ¨¡å‹
4. ç¦ç”¨å‘é‡æ£€ç´¢

---

## ğŸ“š å‚è€ƒèµ„æ–™

- **HuggingFace æ¨¡å‹åº“**: https://huggingface.co/models?library=sentence-transformers
- **ONNX Runtime**: https://onnxruntime.ai/
- **Sentence Transformers**: https://www.sbert.net/

---

## âœ… æ€»ç»“

### å¿«é€Ÿå¼€å§‹ï¼ˆæ¨èï¼‰

```yaml
# ä½¿ç”¨é»˜è®¤é…ç½®ï¼Œæ— éœ€ä¸‹è½½æ¨¡å‹
vector-search:
  enabled: false
```

### é«˜çº§é…ç½®ï¼ˆå¯é€‰ï¼‰

1. ä¸‹è½½æ¨¡å‹æ–‡ä»¶
2. æ”¾åˆ° `src/main/resources/models/` ç›®å½•
3. é‡æ–°æ‰“åŒ…
4. å¯ç”¨å‘é‡æ£€ç´¢

---

<div align="center">

**å¦‚æœ‰é—®é¢˜ï¼Œè¯·æŸ¥çœ‹å¯åŠ¨æ—¥å¿—æˆ–è”ç³»æŠ€æœ¯æ”¯æŒ**

ğŸ“§ support@example.com

</div>

