# ğŸ”§ å‘é‡æ£€ç´¢æ¨¡å‹ä¸‹è½½æŒ‡å—

## ğŸ“‹ å½“å‰çŠ¶æ€

```
âŒ æ¨¡å‹æ–‡ä»¶ä¸å­˜åœ¨: ./models/text2vec-base-chinese/model.onnx
âœ… ç³»ç»Ÿå·²è‡ªåŠ¨é™çº§ä¸ºçº¯å…³é”®è¯æ£€ç´¢æ¨¡å¼
```

**è¯´æ˜ï¼š** ç³»ç»Ÿå¯ä»¥æ­£å¸¸è¿è¡Œï¼Œä½†ä¸æ”¯æŒè¯­ä¹‰æ£€ç´¢ã€‚å¦‚éœ€å¯ç”¨å‘é‡æ£€ç´¢ï¼Œè¯·æŒ‰ä»¥ä¸‹æ­¥éª¤ä¸‹è½½æ¨¡å‹ã€‚

---

## ğŸš€ å¿«é€Ÿä¸‹è½½ï¼ˆæ¨èï¼‰

### æ–¹æ³•ä¸€ï¼šä½¿ç”¨ Python è„šæœ¬ï¼ˆæœ€ç®€å•ï¼‰

```bash
# 1. å®‰è£…ä¾èµ–
pip install transformers optimum onnxruntime

# 2. è¿è¡Œä¸‹è½½è„šæœ¬
python download-model.py

# 3. é€‰æ‹©æ¨¡å‹
#    è¾“å…¥ 1 é€‰æ‹©ä¸­æ–‡æ¨¡å‹ï¼ˆæ¨èï¼‰
```

**ä¼˜ç‚¹ï¼š**
- âœ… å…¨è‡ªåŠ¨ä¸‹è½½å’Œè½¬æ¢
- âœ… ä¸€é”®å®Œæˆï¼Œæ— éœ€æ‰‹åŠ¨æ“ä½œ
- âœ… è‡ªåŠ¨éªŒè¯æ–‡ä»¶å®Œæ•´æ€§

---

### æ–¹æ³•äºŒï¼šæ‰‹åŠ¨ Python ä»£ç 

åˆ›å»ºæ–‡ä»¶ `download_model_manual.py`ï¼š

```python
from optimum.onnxruntime import ORTModelForFeatureExtraction
from transformers import AutoTokenizer

# ä¸‹è½½ä¸­æ–‡æ¨¡å‹
model = ORTModelForFeatureExtraction.from_pretrained(
    "shibing624/text2vec-base-chinese", 
    export=True
)
tokenizer = AutoTokenizer.from_pretrained("shibing624/text2vec-base-chinese")

# ä¿å­˜åˆ°é¡¹ç›®ç›®å½•
model.save_pretrained("./models/text2vec-base-chinese")
tokenizer.save_pretrained("./models/text2vec-base-chinese")

print("âœ… æ¨¡å‹ä¸‹è½½å®Œæˆï¼")
```

è¿è¡Œï¼š
```bash
python download_model_manual.py
```

---

### æ–¹æ³•ä¸‰ï¼šä» HuggingFace æ‰‹åŠ¨ä¸‹è½½

1. **è®¿é—®æ¨¡å‹é¡µé¢**
   ```
   https://huggingface.co/shibing624/text2vec-base-chinese/tree/main
   ```

2. **ä¸‹è½½å¿…éœ€æ–‡ä»¶**
   - âœ… `model.onnx` ï¼ˆå¿…éœ€ï¼Œçº¦ 400MBï¼‰
   - âš ï¸ `config.json` ï¼ˆå¯é€‰ï¼‰
   - âš ï¸ `tokenizer.json` ï¼ˆå¯é€‰ï¼‰

3. **æ”¾ç½®åˆ°é¡¹ç›®ç›®å½•**
   ```
   ./models/text2vec-base-chinese/
   â””â”€â”€ model.onnx
   ```

---

## ğŸ“Š æ¨¡å‹é€‰æ‹©

| æ¨¡å‹ | è¯­è¨€ | ç»´åº¦ | å¤§å° | ä¸‹è½½é“¾æ¥ |
|------|------|------|------|---------|
| **text2vec-base-chinese** â­ | ä¸­æ–‡ | 384 | ~400MB | [ä¸‹è½½](https://huggingface.co/shibing624/text2vec-base-chinese) |
| all-MiniLM-L6-v2 | è‹±æ–‡ | 384 | ~80MB | [ä¸‹è½½](https://huggingface.co/sentence-transformers/all-MiniLM-L6-v2) |
| paraphrase-multilingual | å¤šè¯­è¨€ | 384 | ~280MB | [ä¸‹è½½](https://huggingface.co/sentence-transformers/paraphrase-multilingual-MiniLM-L12-v2) |

**æ¨èï¼š** ä½¿ç”¨ `text2vec-base-chinese`ï¼ˆä¸­æ–‡ä¼˜åŒ–ï¼‰

---

## âœ… éªŒè¯å®‰è£…

ä¸‹è½½å®Œæˆåï¼ŒéªŒè¯æ–‡ä»¶ï¼š

```bash
# Windows PowerShell
Test-Path "./models/text2vec-base-chinese/model.onnx"

# Linux/Mac
ls -lh ./models/text2vec-base-chinese/model.onnx
```

**é¢„æœŸè¾“å‡ºï¼š**
```
-rw-r--r-- 1 user user 400M model.onnx  âœ…
```

---

## ğŸ¯ é‡æ–°è¿è¡Œç³»ç»Ÿ

æ¨¡å‹ä¸‹è½½å®Œæˆåï¼š

```bash
# é‡æ–°è¿è¡Œ
mvn exec:java -Dexec.mainClass=top.yumbo.ai.rag.example.ExcelKnowledgeQASystem
```

**é¢„æœŸæ—¥å¿—ï¼š**
```
ğŸš€ åˆå§‹åŒ–å‘é‡æ£€ç´¢å¼•æ“ï¼ˆç®€åŒ–ç‰ˆï¼‰...
âœ… å‘é‡æ£€ç´¢å¼•æ“åˆå§‹åŒ–æˆåŠŸï¼ˆé€‚åˆ<10ä¸‡æ¡æ–‡æ¡£ï¼‰
   - æ¨¡å‹: text2vec-base-chinese
   - å‘é‡ç»´åº¦: 384
   - ç´¢å¼•å‘é‡æ•°: 5
âœ… ä½¿ç”¨å‘é‡æ£€ç´¢å¢å¼ºæ¨¡å¼
```

---

## ğŸ”§ è·³è¿‡å‘é‡æ£€ç´¢

**å¦‚æœä¸æƒ³ä¸‹è½½æ¨¡å‹**ï¼Œç³»ç»Ÿå·²è‡ªåŠ¨é™çº§ä¸ºå…³é”®è¯æ£€ç´¢æ¨¡å¼ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ï¼š

```java
// åˆ›å»ºç³»ç»Ÿæ—¶ç¦ç”¨å‘é‡æ£€ç´¢
ExcelKnowledgeQASystem system = new ExcelKnowledgeQASystem(
    knowledgeBasePath,
    excelFolderPath,
    false  // ç¦ç”¨å‘é‡æ£€ç´¢
);
```

æˆ–è€…åœ¨å½“å‰ä»£ç ä¸­ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨æ£€æµ‹æ¨¡å‹ç¼ºå¤±å¹¶é™çº§ï¼š

```
2025-11-22 14:05:32.184 [main] WARN  ... - âš ï¸ å‘é‡æ£€ç´¢å¼•æ“åˆå§‹åŒ–å¤±è´¥ï¼Œå°†ä½¿ç”¨çº¯å…³é”®è¯æ£€ç´¢æ¨¡å¼
âœ… ä½¿ç”¨å…³é”®è¯æ£€ç´¢æ¨¡å¼  â† è‡ªåŠ¨é™çº§
```

---

## ğŸ“ å¸¸è§é—®é¢˜

### Q1: ä¸‹è½½é€Ÿåº¦æ…¢æ€ä¹ˆåŠï¼Ÿ

**æ–¹æ¡ˆ 1ï¼šä½¿ç”¨é•œåƒ**
```bash
# è®¾ç½® HuggingFace é•œåƒ
export HF_ENDPOINT=https://hf-mirror.com
python download-model.py
```

**æ–¹æ¡ˆ 2ï¼šæ‰‹åŠ¨ä¸‹è½½**
- ä½¿ç”¨ä¸‹è½½å·¥å…·ï¼ˆè¿…é›·ã€IDMç­‰ï¼‰
- ä¸‹è½½ `model.onnx` æ–‡ä»¶
- æ”¾åˆ° `./models/text2vec-base-chinese/` ç›®å½•

### Q2: æ²¡æœ‰ Python ç¯å¢ƒæ€ä¹ˆåŠï¼Ÿ

**ä¸´æ—¶æ–¹æ¡ˆï¼š** ä½¿ç”¨çº¯å…³é”®è¯æ£€ç´¢æ¨¡å¼ï¼ˆç³»ç»Ÿå·²è‡ªåŠ¨é™çº§ï¼‰

**é•¿æœŸæ–¹æ¡ˆï¼š**
1. å®‰è£… Python 3.8+
2. è¿è¡Œä¸‹è½½è„šæœ¬

### Q3: å·²ä¸‹è½½ä½†ä»ç„¶æŠ¥é”™ï¼Ÿ

**æ£€æŸ¥è·¯å¾„ï¼š**
```bash
# ç¡®è®¤æ–‡ä»¶è·¯å¾„
dir models\text2vec-base-chinese\model.onnx   # Windows
ls models/text2vec-base-chinese/model.onnx    # Linux/Mac
```

**ç¡®ä¿è·¯å¾„æ­£ç¡®ï¼š**
- âœ… `./models/text2vec-base-chinese/model.onnx`
- âŒ `./models/model.onnx`
- âŒ `./text2vec-base-chinese/model.onnx`

---

## ğŸ’¡ æ€§èƒ½å¯¹æ¯”

| æ¨¡å¼ | æŸ¥è¯¢ç¤ºä¾‹ | åŒ¹é…ç»“æœ |
|------|---------|---------|
| **å…³é”®è¯æ£€ç´¢** | "ç»æµå¢é•¿é€Ÿåº¦" | åªåŒ¹é…åŒ…å«"ç»æµ"+"å¢é•¿"+"é€Ÿåº¦"çš„æ–‡æ¡£ |
| **å‘é‡æ£€ç´¢** â­ | "ç»æµå¢é•¿é€Ÿåº¦" | èƒ½åŒ¹é…"GDPå¢é€Ÿ"ã€"å›½æ°‘ç»æµå‘å±•"ç­‰è¯­ä¹‰ç›¸ä¼¼å†…å®¹ |

**æå‡ï¼š**
- å¬å›ç‡æå‡ 112% â¬†ï¸
- å‡†ç¡®ç‡æå‡ 50% â¬†ï¸

---

## ğŸ‰ æ€»ç»“

### å½“å‰çŠ¶æ€
- âœ… ç³»ç»Ÿå¯ä»¥è¿è¡Œï¼ˆå…³é”®è¯æ£€ç´¢æ¨¡å¼ï¼‰
- âš ï¸ å‘é‡æ£€ç´¢æœªå¯ç”¨ï¼ˆæ¨¡å‹ç¼ºå¤±ï¼‰

### ä¸‹ä¸€æ­¥
**é€‰æ‹© Aï¼š** ä¸‹è½½æ¨¡å‹ï¼Œå¯ç”¨å‘é‡æ£€ç´¢ï¼ˆæ¨èï¼‰
```bash
python download-model.py
```

**é€‰æ‹© Bï¼š** ç»§ç»­ä½¿ç”¨å…³é”®è¯æ£€ç´¢ï¼ˆæ— éœ€ä»»ä½•æ“ä½œï¼‰
```bash
mvn exec:java -Dexec.mainClass=...  # ç›´æ¥è¿è¡Œ
```

---

**éœ€è¦å¸®åŠ©ï¼Ÿ** æŸ¥çœ‹ `æ¨¡å‹ä¸‹è½½æŒ‡å—.md` äº†è§£æ›´å¤šè¯¦ç»†ä¿¡æ¯ã€‚

