# çŸ¥è¯†åº“é—®ç­”ç³»ç»Ÿ - å¯åŠ¨æŒ‡å—

## ğŸ“‹ é…ç½®è¯´æ˜

### æ–‡æ¡£æºè·¯å¾„é…ç½®

åœ¨ `application.yml` ä¸­é…ç½®æ–‡æ¡£æºè·¯å¾„ï¼š

```yaml
knowledge:
  qa:
    knowledge-base:
      # ä½¿ç”¨ resources ä¸‹çš„æ–‡æ¡£ï¼ˆæ¨èå¼€å‘æµ‹è¯•ï¼‰
      source-path: classpath:simpleExcel
      
      # æˆ–ä½¿ç”¨æ–‡ä»¶ç³»ç»Ÿè·¯å¾„
      # source-path: ./data/documents
      # source-path: E:/æ–‡æ¡£/çŸ¥è¯†åº“
      
      # å¯åŠ¨æ—¶é‡å»ºçŸ¥è¯†åº“
      rebuild-on-startup: true
```

### æ”¯æŒçš„è·¯å¾„æ ¼å¼

1. **classpath èµ„æº**ï¼ˆæ¨èå¼€å‘æµ‹è¯•ï¼‰
   ```yaml
   source-path: classpath:simpleExcel
   ```
   - è‡ªåŠ¨è¯»å– `src/main/resources/simpleExcel` ä¸‹çš„æ–‡ä»¶
   - æ‰“åŒ…åä¹Ÿèƒ½æ­£å¸¸å·¥ä½œ

2. **ç›¸å¯¹è·¯å¾„**
   ```yaml
   source-path: ./data/documents
   ```
   - ç›¸å¯¹äºåº”ç”¨è¿è¡Œç›®å½•

3. **ç»å¯¹è·¯å¾„**
   ```yaml
   source-path: E:/æ–‡æ¡£/çŸ¥è¯†åº“
   ```
   - æ”¯æŒä¸­æ–‡è·¯å¾„

## ğŸš€ å¯åŠ¨æ­¥éª¤

### 1. å‡†å¤‡æ–‡æ¡£

å°†æ–‡æ¡£æ”¾åˆ°ä»¥ä¸‹ä½ç½®ä¹‹ä¸€ï¼š

- **å¼€å‘ç¯å¢ƒ**: `src/main/resources/simpleExcel/`
- **ç”Ÿäº§ç¯å¢ƒ**: é…ç½®çš„æ–‡ä»¶ç³»ç»Ÿè·¯å¾„

æ”¯æŒçš„æ–‡ä»¶æ ¼å¼ï¼š
- Excel: `.xlsx`, `.xls`
- Word: `.docx`, `.doc`
- PowerPoint: `.pptx`, `.ppt`
- PDF: `.pdf`
- æ–‡æœ¬: `.txt`, `.md`
- å…¶ä»–: `.html`, `.xml`

### 2. é…ç½®å‘é‡æ¨¡å‹ï¼ˆå¯é€‰ï¼‰

å¦‚æœå¯ç”¨å‘é‡æ£€ç´¢ï¼Œéœ€è¦ä¸‹è½½æ¨¡å‹æ–‡ä»¶åˆ° `src/main/resources/models/` ç›®å½•ã€‚

æ¨èæ¨¡å‹ï¼š
- **BGE-M3** (æ¨èï¼Œ2024æœ€æ–°)
- **Multilingual E5 Large**
- **Paraphrase Multilingual**

é…ç½®ï¼š
```yaml
knowledge:
  qa:
    vector-search:
      enabled: true  # å¯ç”¨å‘é‡æ£€ç´¢
      model:
        search-paths:
          - bge-m3
          - paraphrase-multilingual
```

### 3. å¯åŠ¨åº”ç”¨

#### æ–¹å¼1: IDE å¯åŠ¨

åœ¨ IDE ä¸­è¿è¡Œ `KnowledgeQASystemApplication` çš„ `main` æ–¹æ³•ã€‚

#### æ–¹å¼2: Maven å¯åŠ¨

```bash
cd ai-reviewer-base-file-rag
mvn spring-boot:run
```

#### æ–¹å¼3: ä½¿ç”¨ä¸åŒé…ç½®å¯åŠ¨

```bash
# å¼€å‘ç¯å¢ƒï¼ˆæ¯æ¬¡é‡å»ºçŸ¥è¯†åº“ï¼‰
mvn spring-boot:run -Dspring-boot.run.profiles=dev

# ç”Ÿäº§ç¯å¢ƒï¼ˆä½¿ç”¨å·²æœ‰çŸ¥è¯†åº“ï¼‰
mvn spring-boot:run -Dspring-boot.run.profiles=prod
```

### 4. æŸ¥çœ‹å¯åŠ¨æ—¥å¿—

å¯åŠ¨æˆåŠŸåä¼šçœ‹åˆ°ç±»ä¼¼è¾“å‡ºï¼š

```
================================================================================
  ____  _   _  ___        _      ____    _    ____  _   _ ____  
 |  _ \| \ | |/ _ \      / \    / ___|  / \  / ___|| | | / ___| 
 | |_) |  \| | | | |    / _ \  | |     / _ \ \___ \| |_| \___ \ 
 |  __/| |\  | |_| |   / ___ \ | |___ / ___ \ ___) |  _  |___) |
 |_|   |_| \_|\___/   /_/   \_\ \____/_/   \_\____/|_| |_|____/ 

  çŸ¥è¯†åº“æ™ºèƒ½é—®ç­”ç³»ç»Ÿ (Knowledge QA System)
================================================================================

ğŸ“š çŸ¥è¯†åº“é—®ç­”ç³»ç»Ÿåˆå§‹åŒ–ä¸­...

ğŸ”¨ æ­¥éª¤1: åˆå§‹åŒ–çŸ¥è¯†åº“
   - å­˜å‚¨è·¯å¾„: ./data/knowledge-base
   - æ–‡æ¡£è·¯å¾„: classpath:simpleExcel
   - é‡å»ºæ¨¡å¼: æ˜¯ï¼ˆæ¯æ¬¡å¯åŠ¨é‡å»ºï¼‰
   - è·¯å¾„ç±»å‹: classpath èµ„æº
   ğŸš€ å¼€å§‹æ„å»ºçŸ¥è¯†åº“...

ğŸ“‚ æ‰«æ classpath èµ„æº: simpleExcel
âœ“ æ‰¾åˆ°èµ„æº: file:/D:/path/to/resources/simpleExcel/
âœ“ èµ„æºè·¯å¾„: D:\path\to\resources\simpleExcel
âœ“ æ‰«æç›®å½•...
âœ“ æ‰¾åˆ° 213 ä¸ªæ”¯æŒçš„æ–‡ä»¶

ğŸ“ å¼€å§‹å¤„ç†æ–‡æ¡£...
ğŸ“„ å¤„ç†: l0101.xls (15 KB)
   âœ“ æå– 663 å­—ç¬¦
   âœ“ å·²ç´¢å¼•

...

================================================================================
âœ… çŸ¥è¯†åº“æ„å»ºå®Œæˆ
================================================================================
   - æˆåŠŸ: 213 ä¸ªæ–‡ä»¶
   - å¤±è´¥: 0 ä¸ªæ–‡ä»¶
   - æ€»æ–‡æ¡£: 213 ä¸ª
   - è€—æ—¶: 45.67 ç§’
   - å³°å€¼å†…å­˜: 512 MB
================================================================================

âœ… çŸ¥è¯†åº“é—®ç­”ç³»ç»Ÿåˆå§‹åŒ–å®Œæˆï¼
```

## ğŸ” éªŒè¯çŸ¥è¯†åº“

### ä½¿ç”¨ REST API

å¯åŠ¨åè®¿é—®ï¼š

```bash
# å¥åº·æ£€æŸ¥
curl http://localhost:8080/api/qa/health

# è·å–ç»Ÿè®¡ä¿¡æ¯
curl http://localhost:8080/api/qa/statistics

# æœç´¢æ–‡æ¡£
curl "http://localhost:8080/api/qa/search?query=äººå£&limit=5"

# é—®ç­”
curl -X POST http://localhost:8080/api/qa/ask \
  -H "Content-Type: application/json" \
  -d '{"question": "ä¸­å›½æ€»äººå£æ˜¯å¤šå°‘ï¼Ÿ"}'
```

## âš ï¸ å¸¸è§é—®é¢˜

### 1. æ‰¾ä¸åˆ°æ–‡æ¡£

**é—®é¢˜**: æ—¥å¿—æ˜¾ç¤º "æœªæ‰¾åˆ°æ”¯æŒçš„æ–‡æ¡£æ–‡ä»¶"

**è§£å†³**:
- æ£€æŸ¥ `source-path` é…ç½®æ˜¯å¦æ­£ç¡®
- ç¡®è®¤æ–‡æ¡£å·²æ”¾åˆ°å¯¹åº”ç›®å½•
- æ£€æŸ¥æ–‡ä»¶æ ¼å¼æ˜¯å¦åœ¨æ”¯æŒåˆ—è¡¨ä¸­

### 2. classpath èµ„æºä¸å­˜åœ¨

**é—®é¢˜**: æ—¥å¿—æ˜¾ç¤º "classpath èµ„æºä¸å­˜åœ¨"

**è§£å†³**:
- ç¡®è®¤ `src/main/resources/simpleExcel` ç›®å½•å­˜åœ¨
- åˆ·æ–°é¡¹ç›®ï¼ˆIDE ä¸­ï¼‰
- é‡æ–°ç¼–è¯‘é¡¹ç›®

### 3. å†…å­˜æº¢å‡º

**é—®é¢˜**: å¤„ç†å¤§é‡æ–‡æ¡£æ—¶å†…å­˜ä¸è¶³

**è§£å†³**:
- å¢åŠ  JVM å †å†…å­˜: `-Xmx2g`
- å‡å°‘æ‰¹å¤„ç†å¤§å°
- ä½¿ç”¨æ–‡ä»¶ç³»ç»Ÿè·¯å¾„è€Œé classpath

### 4. æ¨¡å‹æ–‡ä»¶æ‰¾ä¸åˆ°

**é—®é¢˜**: å‘é‡æ£€ç´¢åˆå§‹åŒ–å¤±è´¥

**è§£å†³**:
- ä¸‹è½½æ¨¡å‹æ–‡ä»¶åˆ° `resources/models/` ç›®å½•
- æˆ–ç¦ç”¨å‘é‡æ£€ç´¢: `vector-search.enabled: false`

## ğŸ“ é…ç½®å‚è€ƒ

### æœ€å°é…ç½®ï¼ˆçº¯å…³é”®è¯æ£€ç´¢ï¼‰

```yaml
knowledge:
  qa:
    knowledge-base:
      source-path: classpath:simpleExcel
      rebuild-on-startup: true
    vector-search:
      enabled: false  # ç¦ç”¨å‘é‡æ£€ç´¢
    llm:
      provider: mock  # ä½¿ç”¨ Mock LLM
```

### å®Œæ•´é…ç½®ï¼ˆå‘é‡æ£€ç´¢ + çœŸå® LLMï¼‰

```yaml
knowledge:
  qa:
    knowledge-base:
      source-path: classpath:simpleExcel
      rebuild-on-startup: false
    vector-search:
      enabled: true
      top-k: 20
    llm:
      provider: openai
      api-key: ${OPENAI_API_KEY}
      model: gpt-4o
```

## ğŸ¯ ä¸‹ä¸€æ­¥

å¯åŠ¨æˆåŠŸåï¼Œå¯ä»¥ï¼š

1. é€šè¿‡ REST API æµ‹è¯•é—®ç­”åŠŸèƒ½
2. æŸ¥çœ‹ `./data/knowledge-base` ç›®å½•ä¸‹çš„ç´¢å¼•æ–‡ä»¶
3. è°ƒæ•´é…ç½®ä¼˜åŒ–æ€§èƒ½
4. é›†æˆåˆ°ä½ çš„åº”ç”¨ä¸­

---

**éœ€è¦å¸®åŠ©ï¼Ÿ** æŸ¥çœ‹ [å®Œæ•´æ–‡æ¡£](README.md)

